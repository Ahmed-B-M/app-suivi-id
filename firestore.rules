/**
 * @description This ruleset enforces a public read-only model for all Urbantz API data (hubs, customers, tasks, rounds, and tickets).
 *   All data is stored in top-level collections.
 * @dataStructure
 *   /hubs/{hubId}
 *   /customers/{customerId}
 *   /tasks/{taskId}
 *   /rounds/{roundId}
 *   /tickets/{ticketId}
 * @keySecurityDecisions
 *   - All collections are publicly readable.
 *   - Writes are disallowed for all users (including authenticated users) due to the lack of an ownership field.
 *   - Listing of all collections is enabled.
 */
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    /**
     * @description Allows public read access to hub data.  Writes are forbidden.
     * @path /hubs/{hubId}
     * @allow (get, list): Any user can read hub data.
     * @deny (create, update, delete): No user can modify hub data.
     * @principle Allows public read, but forbids all writes.
     */
    match /hubs/{hubId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }

    /**
     * @description Allows public read access to customer data. Writes are forbidden.
     * @path /customers/{customerId}
     * @allow (get, list): Any user can read customer data.
     * @deny (create, update, delete): No user can modify customer data.
     * @principle Allows public read, but forbids all writes.
     */
    match /customers/{customerId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }

    /**
     * @description Allows public read access to task data. Writes are forbidden.
     * @path /tasks/{taskId}
     * @allow (get, list): Any user can read task data.
     * @deny (create, update, delete): No user can modify task data.
     * @principle Allows public read, but forbids all writes.
     */
    match /tasks/{taskId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }

    /**
     * @description Allows public read access to round data. Writes are forbidden.
     * @path /rounds/{roundId}
     * @allow (get, list): Any user can read round data.
     * @deny (create, update, delete): No user can modify round data.
     * @principle Allows public read, but forbids all writes.
     */
    match /rounds/{roundId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }

    /**
     * @description Allows public read access to ticket data. Writes are forbidden.
     * @path /tickets/{ticketId}
     * @allow (get, list): Any user can read ticket data.
     * @deny (create, update, delete): No user can modify ticket data.
     * @principle Allows public read, but forbids all writes.
     */
    match /tickets/{ticketId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }
  }
}