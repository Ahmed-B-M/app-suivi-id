/**
 * @description This ruleset enforces public read access for all collections and owner-only write access.
 * @dataStructure The Firestore database contains top-level collections for tasks, rounds, categorized comments, NPS data, and processed NPS verbatims.
 * @keySecurityDecisions All collections are publicly readable. Writes are generally disallowed without specific authorization logic to be added in the future.
 */
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    /**
     * @description Allows public read access to tasks, but restricts write access.
     * @path /tasks/{taskId}
     * @allow (get, list) - Any user can read task data.
     * @deny (create, update, delete) - No user can create, update, or delete task data without further authorization.
     * @principle Allows public reads with restricted writes.
     */
    match /tasks/{taskId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }

    /**
     * @description Allows public read access to rounds, but restricts write access.
     * @path /rounds/{roundId}
     * @allow (get, list) - Any user can read round data.
     * @deny (create, update, delete) - No user can create, update, or delete round data without further authorization.
     * @principle Allows public reads with restricted writes.
     */
    match /rounds/{roundId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }

    /**
     * @description Allows public read access to categorized comments, but restricts write access.
     * @path /categorized_comments/{taskId}
     * @allow (get, list) - Any user can read categorized comments.
     * @deny (create, update, delete) - No user can create, update, or delete categorized comments without further authorization.
     * @principle Allows public reads with restricted writes.
     */
    match /categorized_comments/{taskId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }

    /**
     * @description Allows public read access to NPS data, but restricts write access.
     * @path /nps_data/{date}
     * @allow (get, list) - Any user can read NPS data.
     * @deny (create, update, delete) - No user can create, update, or delete NPS data without further authorization.
     * @principle Allows public reads with restricted writes.
     */
    match /nps_data/{date} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }

    /**
     * @description Allows public read access to processed NPS verbatims, but restricts write access.
     * @path /processed_nps_verbatims/{taskId}
     * @allow (get, list) - Any user can read processed NPS verbatims.
     * @deny (create, update, delete) - No user can create, update, or delete processed NPS verbatims without further authorization.
     * @principle Allows public reads with restricted writes.
     */
    match /processed_nps_verbatims/{taskId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }
  }
}